<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>MGE HS2022: Teil Android</title>
  </head>
  <body class="typora-export os-windows">
    <div class="typora-export-content">
      <div id="write" class="">
        <h1 id="android-einführung"><span>Android Einführung</span></h1>
        <p>
          <strong><span>Motivation</span></strong
          ><span
            >: Marktanteil Android weltweit ~70%, schweizweit 44%. Single- vs
            Multiplatform (Codebase), Native/Hybrid App/Web App. Hybride und Web
            Apps erreichen nativen Look&amp;Feel über visuelles Styling. Hybride
            Apps greifen über native Libraries auf Device Featuers zu. Beispiele
            zu CP Native: Flutter, Xamarin / CP Hybrid: Cordova, Ionic. Vorteile
            Android SDK: Voller Funktionsumfang, Keine Tools/Einschränkungen von
            Drittanbietern, Konzepte und Tools sind Basis vieler Frameworks.
          </span>
        </p>
        <p><img src="res\apps-ansaetze.png" referrerpolicy="no-referrer" /></p>
        <h2 id="grundlagen-begriffe"><span>Grundlagen, Begriffe</span></h2>
        <p>
          <strong><span>Android</span></strong
          ><span
            >: Seit 2003, Google seit 2005. V1.0 in 2008. Linux-basiert.
            Entwickelt von Open Handset Alliance, unter Google-Leitung (Android
            Open Source Project). Lose miteinander gekoppelten Komponenten
            (Activities, Content Providers, Services und Broadcast Receiver). </span
          ><strong><span>Google</span></strong
          ><span>
            ist Gründer der OHA, Mitentwickler von Android und Anbieter
            wichtiger Services und Apps.</span
          >
        </p>
        <p><img src="res\android-os.png" referrerpolicy="no-referrer" /></p>
        <p>
          <strong><span>Fragmentierung</span></strong
          ><span>
            beschreibt die verschiedenen aktuell verbreiteten Android-Versionen.
            Schuld daran sind Hersteller, die alte Geräte nicht mehr mit neuen
            Updates versorgen. </span
          ><strong><span>Google-Dienste</span></strong
          ><span>
            sind nicht zwingend, beispiel Huawei verwendet AOSP. Bieten oft
            komfortablere Alternativen zu Standard-Libraries. Wichtig: Google
            Play Store. </span
          ><strong><span>Rückwärtskompatibilität</span></strong
          ><span> </span><code>minSdkVersion</code
          ><span>: Ältere Geräte können meine App nicht nutzen. </span
          ><code>maxSdkVersion</code><span>: nutzlos? </span
          ><code>targetSdkVersion</code
          ><span
            >: gibt an, auf welche Version die App getestet ist und sicher
            stabil läuft. </span
          ><code>compileSdkVersion</code
          ><span
            >: wird so kompiliert, beinhaltet neue Funktionen, aber diese werden
            nicht verwendet (?)</span
          >
        </p>
        <p>
          <span
            >Wird Code eines API Level verwendet, der höher ist als die
            minSdkVersion, muss das verwendete Device abgefragt und ein Fallback
            definiert werden. Um das zu vermeiden gibt es </span
          ><strong><span>Android Jetpack / AndroidX</span></strong
          ><span
            >. Erweitert die Android SDK, wird unabhängig von Android
            entwickelt. Eigene Versionierung. Verwendete Klassen müssen nur
            erben von AppCompatActivity statt Activity, AppCompatButton statt
            Button, etc etc.</span
          >
        </p>
        <h2 id="tooling"><span>Tooling</span></h2>
        <p>
          <span
            >Android Studio wird von JetBrains zur Verfügung gestellt.
            Beinhaltet Android SDK und GUI-Wrapper für viele SDK Tools.
          </span>
        </p>
        <ol start="">
          <li>
            <span
              >Setzen der JAVA_HOME Environment Variable auf korrektes
              Verzeichnis: </span
            ><code>/usr/lib/jvm/jdk-17/bin/</code
            ><span> (Huawei Ubuntu in </span><code>~/.zshrc</code
            ><span> - check mit </span><code>echo $JAVA_HOME</code
            ><span>).</span>
          </li>
          <li>
            <span
              >Setting für verwendete Java SDK in Android Studio: Optionen
              -&gt;Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle..
              Einstellung Gradle JDK auf &quot;Android Studio default JDK
              Version 11.0.13&quot;.</span
            >
          </li>
        </ol>
        <h3 id="android-sdk"><span>Android SDK</span></h3>
        <ul>
          <li>
            <span>SDK-Manager: </span
            ><code>/usr/bin/android/cmdline-tools/latest/bin/sdkmanager</code>
          </li>
          <li>
            <span>Plattform Tools inkl. </span><code>adb</code
            ><span> (Debug Bridge?)</span>
          </li>
          <li><span>Platform SDKs </span><code>platforms</code></li>
          <li>
            <span>Emulator: </span
            ><code>/usr/bin/android/emulator/emulator</code>
          </li>
          <li><span>Emulator Images: </span><code>system-images</code></li>
          <li>
            <span>Intel HAXM (Virtualisierung/Emulator Unterstützung)</span>
          </li>
        </ul>
        <h3 id="programmiersprache"><span>Programmiersprache</span></h3>
        <p>
          <span
            >Grundlegend Java, seit 2019 durch Kotlin abgelöst als von Google
            empfohlene Sprache zur Entwicklung. Kotlin ist interoperabel mit
            Java-Code.</span
          >
        </p>
        <h1 id="android-grundkonzepte"><span>Android Grundkonzepte</span></h1>
        <p>
          <span
            >Apps bestehen aus lose gekoppelten, wiederverwendbaren Komponenten
            wie </span
          ><em
            ><span
              >Activities, Content Providers, Services und Broadcast Receivers,
              etc.</span
            ></em
          ><span> </span><strong><span>Lebenszyklus</span></strong
          ><span>: vom OS verwaltet, kann App jederzeit terminieren. </span
          ><strong><span>Kommunikation</span></strong
          ><span> zwischen Komponenten/Apps evenfalls nur via OS. </span>
        </p>
        <p>
          <img
            src="res/android-app-struktur.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <h2 id="activity"><span>Activity</span></h2>
        <p>
          <em><span>= eine Aufgabe</span></em
          ><span
            >. Besitzt eine graphische Oberfläche und verarbeitet
            Benutzereingaben. Main Activity wird beim App-Start ausgeführt. Muss </span
          ><strong><span>im Manifest registriert</span></strong
          ><span> werden. Bei Activity Start wird </span
          ><strong><span>XML verknüpft</span></strong
          ><span>: </span
          ><code>onCreate () { setContentView( R.layout.activity_main ); }</code
          ><span>. Ereignisse im XML File werden via </span
          ><strong><span>Listener</span></strong
          ><span> verarbeitet. </span><strong><span>Zustände</span></strong
          ><span>
            und Callbacks bei Zustands-Wechseln. Methoden werden bei Bedarf
            überschrieben. </span
          ><strong><span>Zustände</span></strong
          ><span
            >: Created &gt;&gt; Started &gt;&gt; Paused &gt;&gt; Resumed
            &gt;&gt; Stopped &gt;&gt; Destroyed. </span
          ><strong><span>Callbacks</span></strong
          ><span
            >: onCreate, onStart, onRestart, onResume, onPause, onStop,
            onDestroy.</span
          >
        </p>
        <p>
          <span>Typisch: </span><strong><span>Datensicherung</span></strong
          ><span> bei </span><code>onPause()</code><span> oder </span
          ><code>onStop()</code><span>, </span
          ><strong><span>Dienste</span></strong
          ><span> ein-/ausschalten bei </span><code>onResume/onPause</code
          ><span>
            (oder: Lifecycle-aware components), Zustand des GUI erhalten bei </span
          ><code>onSaveInstanceState/onRestoreInstanceState</code
          ><span> (oder: ViewModel).</span>
        </p>
        <h2 id="event-handling"><span>Event Handling</span></h2>
        <p>
          <span
            >Basic: Listener reagieren auf Ereignisse im GUI, wenn registriert.
            Objektreferenzen abholen via findViewById(int). Je nach Event-Typ
            und View Item unterschiedliche Interfaces, die überschrieben werden
            können.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Button</span> <span class="cm-variable">button</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>.<span class="cm-variable">findViewById</span>(<span class="cm-variable">R</span>.<span class="cm-variable">id</span>.<span class="cm-variable">button_example</span>);</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">button</span>.<span class="cm-variable">setOnClickListener</span>(<span class="cm-keyword">new</span> <span class="cm-variable">View</span>.<span class="cm-variable">OnClickListener</span>() { <span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onClick</span>(<span class="cm-variable">View</span> <span class="cm-variable">view</span>) {}});</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre>
        <h2 id="resources"><span>Resources</span></h2>
        <p>
          <span>Werden im Java Code über die </span
          ><strong><span>R-Klasse</span></strong
          ><span>
            angesprochen, die wird beim Build erzeugt und ist mit Namespaces
            strukturiert. Resource ID als </span
          ><code>int</code><span>. Enthält Layouts, Bilder, Videos, ... </span
          ><strong><span>Value Resources</span></strong
          ><span>
            werden in einzelnen Files nach Typen gruppiert: Farbwerte,
            Dimensionen, Texte, Styles. </span
          ><strong><span>Qualifiers</span></strong
          ><span>
            im Dateinamen können verwendet werden, um spezifisch auf Endgerät
            verschiedene Informationen zu laden. Unterscheidung nach Sprachen,
            Auflösungen, Gerätetypen, API-Versionen etc..</span
          >
        </p>
        <h2 id="dimensionen"><span>Dimensionen</span></h2>
        <p>
          <strong><span>dp</span></strong
          ><span>: density-independent pixel (für fast alles), </span
          ><strong><span>sp</span></strong
          ><span>: scale-independent pixel für schriften</span>
          <strong><span>px/pt</span></strong
          ><span>: pixel/punkte (nie), </span><strong><span>in/mm</span></strong
          ><span>: inch / millimeter (auch nie..)</span>
        </p>
        <h2 id="manifest"><span>Manifest</span></h2>
        <p>
          <strong><span>Inhalt:</span></strong
          ><span>
            alle Informationen die Android braucht, um die App installieren und
            darstellen zu können. d.h.
          </span>
          <span>App-ID/Name (</span
          ><code>package=&quot;dev.kuendig.choirmate&quot;</code
          ><span>: eindeutige Id, definiert Namespace)</span>
          <span>Version </span><em><span>(aus build.gradle ergänzt)</span></em
          ><span> (</span><em><span>versionName</span></em
          ><span>: lesbar / </span><em><span>versionCode</span></em
          ><span>: positiver Int) und Logo, min- und targetsdkVersion </span
          ><em><span>(build.gradle)</span></em
          ><span
            >, enthaltene Komponenten, Hard- und Softwareanforderungen,
            benötigte Berechtigungen.
          </span>
        </p>
        <h2 id="intents"><span>Intents</span></h2>
        <p>
          <span
            >Dienen zur Kommunikation zwischen Komponenten, wechseln zwischen
            Activities. </span
          ><strong><span>Expliziter</span></strong
          ><span>
            Intent: Zeige einen spezifischen Screen, normal eigene App. </span
          ><strong><span>Impliziter</span></strong
          ><span>
            Intent: Zeige eine passende Komponente für die aktuelle Aktion,
            normal fremde App. Registrieren auf implizite Intents im Manifest.
            Bei Verwendung immer erst prüfen, ob eine passende App vorhanden ist
            mit </span
          ><code
            >bool hasReceiver = intent.resolveActivity(getPackageManager()) !=
            null;</code
          ><span> .</span><br /><span>Benötigt </span
          ><code
            >&lt;uses-permission
            android:name=&quot;android.permission.QUERY_ALL_PACKAGES&quot;
            /&gt;</code
          ><span> im Manifest.</span>
        </p>
        <p>
          <span>Ziel des Intents definieren mit </span
          ><code>intent.setData(&quot;Uri:Datei/webseite/telnr/...&quot;)</code
          ><span>, </span
          ><code
            >startActivity(Intent)`` Wenn der Intent ein Resultat zurückliefert:
            ``startActivityForResult(Intent)</code
          ><span>.</span>
          <span
            >Übergeben von Daten via Extras (primitive Types, String und
            serialisierbare Objekte): </span
          ><code>intent.putExtra(&quot;solution&quot;, 42);</code
          ><span> Kommunikation mit anderen Komponenten möglich (W06).</span>
        </p>
        <h2 id="tasks--back-stacks-prozesse-threads">
          <span>Tasks / Back Stacks, Prozesse, Threads</span>
        </h2>
        <p>
          <span
            >Alle ausgeführten Activites werden in einem Back Stack bzw. Task
            verwaltet (Overview Screen zeigt die verschiedenen offenen Tasks).
            Activities innerhalb Task können mehrfach vorhanden sein oder auch
            zu verschiedenen Apps gehören. Acitivities können auch in neuen
            Tasks gestartet werden. Jede App / APK wird mit einem eigenen
            Linux-User installiert (Sandbox Prinzip). APK hat genau 1 eigenen </span
          ><strong><span>Prozess</span></strong
          ><span>, darin mind. den Main-</span
          ><strong><span>Thread</span></strong
          ><span>
            und evtl. weitere Threads. Blockieren des Main-Trheads führt zum
            Application Not Responding (</span
          ><strong><span>ANR</span></strong
          ><span
            >-) Screen. GUI-Aktualisierung nur aus Main-Thread möglich,
            langlaufende Operationen immer in anderen Thread (Runnable,
            (Coroutine?)) auslagern.</span
          >
        </p>
        <p>
          <span>Optionen zur GUI-Aktualisierung: </span
          ><code>Activity.runOnUiThread(Runnable)</code><span>, </span
          ><code>View.post(runnable)</code><span>, </span><code>Handler</code
          ><span> und </span><code>Looper</code>
        </p>
        <h2 id="rückwärtskompatibilität">
          <span>Rückwärtskompatibilität</span>
        </h2>
        <p>
          <span
            >API Level identifiziert die Android API Version. Höhere Levels
            enthalten immer alle tieferen, aber ggf. als deprecated markiert. </span
          ><strong><span>Trade Off</span></strong
          ><span
            >: niedrig um alle Geräte zu erreichen, hoch um die neuen Funktionen
            nutzen zu können. Werte in Manifest bzw. Gradle:</span
          >
        </p>
        <p>
          <code>minSdkVersion</code
          ><span>: ältere Geräte können meine App nicht nutzen. </span
          ><code>maxSdkVersion</code
          ><span
            >: Wird von Android ignoriert, von Google Play Store als Filter
            verwendet. Empfehlung: ignorieren. </span
          ><code>targetSdkVersion</code
          ><span
            >: gibt an, auf welche Version die App getestet ist und sicher
            stabil läuft. </span
          ><code>compileSdkVersion</code
          ><span
            >: gibt an, mit welcher API die App kompiliert wird/wurde.</span
          >
          <span>Ziel: </span
          ><code>minSdk &lt;= targetSdk &lt;= compileSdk</code>
        </p>
        <p>
          <span
            >Wird Code eines API Level verwendet, der höher ist als die
            minSdkVersion, muss auf dem Gerät ein </span
          ><strong><span>Versionscheck</span></strong
          ><span>
            gemacht und ein Fallback definiert werden. Um das zu vermeiden, gibt
            es </span
          ><strong><span>Android Jetpack / AndroidX</span></strong
          ><span
            >. Erweitert die Android SDK, wird unabhängig von Android
            entwickelt. Eigene Versionierung. Verwendete Klassen müssen nur
            erben von Komponenten der AppCompat Jetpack-Library. </span
          ><code>AppCompatActivity</code><span> statt </span
          ><code>Activity</code><span>, </span><code>AppCompatButton</code
          ><span> statt </span><code>Button</code
          ><span
            >, etc etc. Hiess früher Android Support Libraries, Namespace ist </span
          ><code>androidx</code
          ><span
            >. Integration durch Android Studio automatisch in neuen
            Projekten.</span
          >
        </p>
        <h1 id="android-gui-programmierung">
          <span>Android GUI Programmierung</span>
        </h1>
        <p>
          <span
            >Zwei Arten zur Darstellung des GUI: Beschreibung im XML vs.
            Quellcode (Java oder Kotlin)</span
          >
        </p>
        <h2 id="views-und-view-groups-auch-layouts-containers">
          <span>Views und View Groups (auch Layouts, Containers)</span>
        </h2>
        <p>
          <span
            >Stellen einen hierarchischen Baum dar, nach Composite Design
            Pattern. </span
          ><strong><span>View</span></strong
          ><span>
            ist Basisklasse aller GUI Elemente. Aufgaben: Darstellung und
            Event-Verarbeitung. </span
          ><strong><span>ViewGroup</span></strong
          ><span>
            dient der Anordnung von Kindern nach einem Muster. Ist
            strukturierend aber selber unsichtbar. Verschachtelung ist beliebig
            möglich, aber immer eine Performancefrage.</span
          >
          <strong><span>Einfache Layouts</span></strong
          ><span> sind LinearLayout, RelativeLayout, </span
          ><em><span>ConstraintLayout</span></em
          ><span>, </span><strong><span>AdapterLayouts</span></strong
          ><span> sind ListView, GridView, </span
          ><em><span>RecyclerView</span></em
          ><span> (Google empfiehlt).</span>
          <span>Höhe und Breite müssen zwingend definiert sein. </span
          ><code>layout_width</code><span> und </span><code>layout_height</code
          ><span> (immer nur &quot;ein Wunsch&quot;) mit entweder </span
          ><code>wrap_content</code><span> oder </span><code>match_parent</code
          ><span>
            (kann über einen Screen hinausgehen). Jede Eigenschaft mit </span
          ><strong><span>Präfix &quot;_layout&quot;</span></strong
          ><span> dient als Wunsch an das Elternelement (</span
          ><code>layout_width, layout_height, layout_margin</code
          ><span>). </span><code>padding</code
          ><span>
            wird auf Element selber gesetzt. Verschiedene Abmessungen pro
            Element: </span
          ><code>getMeasuredWidth/Height(),</code
          ><span> für &quot;Wunsch&quot;, </span><code>getWidth/Height()</code
          ><span> für reale Grösse.</span>
        </p>
        <p>
          <img src="res/layout-boxmodel.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <strong><span>LinearLayout:</span></strong
          ><span> </span
          ><code>android:orientation=&quot;vertical|horizontal&quot;</code
          ><span> , </span><code>android:layout_weight=&quot;1&quot;</code
          ><span> zur Aufteilung vom restlich verbleibenden Platz. </span
          ><strong><span>FrameLayout</span></strong
          ><span>
            wird für Overlay-Designs verwendet. XML-Reihenfolge oder </span
          ><code>android:translationZ</code
          ><span> bestimmt die Höhe auf Z-Achse. </span
          ><strong><span>RelativeLayout</span></strong
          ><span>
            ordnet Kinder relativ zueinander an. Viele Parameter wie </span
          ><code
            >android:layout_alignParentTop=&quot;true&quot;,
            below=&quot;@id/x&quot;, toStartOf=&quot;@id/x&quot;,
            alignStart=&quot;@id/y&quot;</code
          ><span> (immer mit Layout-Prefix). </span
          ><strong><span>ConstraintLayout</span></strong
          ><span>
            (Jetpack) wurde speziell für komplexe Layouts mit flacher Hierarchie
            entworfen. Constraints definieren &quot;Beziehungen zwischen
            Views&quot;. Minimum 1x horizontal und 1x vertical Constraint.
            Bevorzugt rein visuelles Design in der IDE. Automatische Umwandlung
            in ein Constraint Layout ist möglich. Namespace Import </span
          ><code
            >xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</code
          >
          <span>Constraint-Varianten:</span>
        </p>
        <p>
          <img src="res/android-constraints.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <strong><span>ScrollView</span></strong
          ><span>
            hat nur ein Kind-Element und ergänzt eine vertikale Scrollbar. </span
          ><strong><span>HorizontalScrollView</span></strong
          ><span> für nur horizontal oder Jetpack </span
          ><strong><span>NestedScrollView</span></strong
          ><span> für beides. width/height=match_parent.</span>
        </p>
        <h2 id="adapter-layouts-für-collections">
          <span>Adapter Layouts für Collections</span>
        </h2>
        <p>
          <img
            src="res/android-adapterlayout.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <p>
          <span
            >Anzahl der Elemente ist nicht bekannt, aber die Struktur.
            Collection von Elementen (Daten) muss dargestellt werden via
            Adapter. </span
          ><strong><span>Hint</span></strong
          ><span
            >: Leere Listen vermeiden, Platzhalter verwenden durch
            ein/ausblenden von Elementen. </span
          ><strong><span>View Recycling</span></strong
          ><span>
            lässt die View-Elemente beim Scrollen wiederverwendet werden. Spart
            Arbeitsspeicher bei den anzuzeigenden Elementen und Rechenzeit beim
            enerieren von Views. </span
          ><strong><span>Android Array Adapter</span></strong
          ><span>
            implementiert dies selber schon. Bietet einfache Vorlagen für
            Listitems, die jeweils mit String Arrays verwendet werden können. </span
          ><strong><span>Custom ArrayAdapter:</span></strong
          ><span> Dient der Darstellung von komplexeren Datenklassen </span
          ><code>custom</code
          ><span>
            auf dieselben Listitem-Vorlagen. Eigene Adapterklasse leitet von </span
          ><code>ArrayAdapter&lt;custom&gt;</code
          ><span> ab und überschreibt speziell die Methode </span
          ><code
            >public View getView(int position, View view, ViewGroup
            parent);</code
          ><span
            >. Diese kümmert sich um das Erzeugen und anschliessende
            Wiederverwenden von der nötigen Anzahl Views. Weiter werden von der </span
          ><code>custom</code
          ><span
            >-Klasse dann definiert, welche Felder in welche Textfelder der View
            abgefüllt werden. Der entsprechende Eintrag wird mit </span
          ><code>Custom custom = getItem(pos);</code><span> abgeholt.</span>
          <strong><span>View Holder Pattern:</span></strong
          ><span> Optimieren von </span><code>findViewById</code
          ><span>
            pro dargestelltem Element beim scrollen, Ziel Speichern der
            Objektreferenzen pro erzeugte View. Klasse ViewHolder beinhaltet nur
            die nötigen Referenzen. Nach Erzeugen der View wird das Objekt mit </span
          ><code>view.setTag(viewHolder)</code
          ><span> an die View geknüpft. Abfrage mit </span
          ><code>(ViewHolder)view.getTag();</code><span>.</span>
        </p>
        <p>
          <span>Ergo </span><strong><span>RecyclerView</span></strong
          ><span>
            (Jetpack): ViewRecycling integriert, ViewHolder Verwendung wird
            erzwungen. Weniger Overhead im eigenen Code. Ableitung von Basis </span
          ><code>RecyclerView.Adapter&lt;ViewHolder&gt;</code
          ><span>
            benötigt zwingend eigenen ViewHolder Typen bei Implementierung.
            Weiter ist Überschreiben von 3 Methoden nötig. </span
          ><code>getItemCount()</code
          ><span>
            implementiert, wie viele Objekte in der Liste vorhanden sind. </span
          ><code>onCreateViewHolder(ViewGroup parent, int vt)</code
          ><span>
            erzeugt ViewHolder und generiert Layout, holt Controls ab. Kein
            Erzeugen der Views mehr. </span
          ><code>onBindVewHolder(ViewHolder holder, int position)</code
          ><span>
            füllt die Informationen aus den darzustellenden Listenelementen in
            den ViewHolder ab.</span
          >
        </p>
        <h2 id="controls-widgets"><span>Controls (Widgets)</span></h2>
        <p>
          <span>Namespace </span><code>android.widget</code
          ><span>. Sammelbegriff für visuelle Elemente. Basisklasse ist </span
          ><code>View</code><span> (nicht Widget). </span
          ><strong><span>TextView</span></strong
          ><span>: viele Format Attribute, integrierte Bilder (</span
          ><code>android:drawable[Start|End]</code
          ><span>), Listener möglich. </span
          ><code>beforeTextChanged, onTextChanged, afterTextChanged</code
          ><span>
            sind mögl. Callbacks zum Handling von Events. Besser einfach
            halten.. </span
          ><strong><span>ImageView</span></strong
          ><span>: Bilder. Mögli. Parameter: </span
          ><code>android:src, android:scaleType, android:tint</code
          ><span>. </span><strong><span>Button und ImageButton</span></strong
          ><span
            >: lösen Aktionen via Listener aus. Ableitung von
            TextView/ImgageView. StandardStyling je nach OS Version. </span
          ><strong><span>EditText</span></strong
          ><span>: Eingabefeld für Texte und Zahlen. Parameter </span
          ><code>android:inputType</code
          ><span>
            steuert Typ und angezeigte Tastatur, Korrekturoptionen, Darstellung,
            Mehrzeiligkeit. Kombination mit </span
          ><code>android:inputType=&quot;param1|param2&quot;</code
          ><span>. </span><code>inputField.setError()</code
          ><span>
            für Validierung, wird nach jeder Änderung zurückgesetzt. Fehlericon
            bei Bedarf anpassbar.</span
          >
          <strong><span>Weitere Controls</span></strong
          ><span
            >: Checkboxes, Picker, Floating Action Button, Radio Buttons,
            Switches, Seek Bar, Rating Bar, Spinner...
          </span>
        </p>
        <h3 id="controls-ohne-xml"><span>Controls ohne XML</span></h3>
        <p>
          <span
            >Layout von Android vorgegeben, übergeben werden nur einzelne
            Parameter. Bsp: Fehlermeldungen. </span
          ><strong><span>Toasts:</span></strong
          ><span>
            Einfache Rückmeldung im Popup Fenster, keine Benutzerinteraktion.
            Position und Layout anpassbar. </span
          ><strong><span>Snackbars:</span></strong
          ><span> Jetpack-Variante f. Toast, Benutzerinteraktion möglich. </span
          ><strong><span>Dialoge:</span></strong
          ><span>
            Antwort von Benutzer zwingend. Anpassen von Titel, Inhalt, Buttons,
            ... </span
          ><strong><span>Notifications:</span></strong
          ><span>
            Mitteilungen ausserhalb aktiver Nutzung. Anpassen von Dringlichkeit,
            Darstellung, Gruppierung. Darstellung mögl. in Statusbar,
            Notification Drawer, Heads-Up Notif., Lock Screen, App Icon Badge. </span
          ><code>NotificationCompat</code><span> aus Jetpack verwenden. </span
          ><strong><span>Menus</span></strong
          ><span
            >: Options Menu in Appbar (Hamburger Icon), Contextual Menu
            (Floating oder in einer ContextActionBar), Popup Menu. Resource in </span
          ><code>res/menu</code
          ><span>
            definiert Inhalt, Handlung der Auswahl innerhalb Activity. Jetpack
            verwenden.</span
          >
        </p>
        <h1 id="android-strukturierung-styling-material-design">
          <span>Android Strukturierung, Styling, Material Design</span>
        </h1>
        <h2 id="strukturierung-mit-fragments">
          <span>Strukturierung mit Fragments</span>
        </h2>
        <p>
          <span
            >Activities füllen zwingend immer einen kompletten Screen. Mehrere
            in sich geschlossene Elemente auf einen Screen können mit Fragments
            erreicht werden. Fragments haben einen eigenen </span
          ><strong><span>Lebenszyklus</span></strong
          ><span>
            und können auch mehrfach auf einen Screen eingebunden werden. </span
          ><em
            ><span
              >Fragments sind in der Android SDK &quot;deprecated&quot;, werden
              aktueller in AndroidX / Jetpack geführt. Verwendung: </span
            ><code
              >androidx.fragment.app.* / getSupportFragmentManager()</code
            ></em
          ><span>. </span> <strong><span>Lifecycle Callbacks </span></strong
          ><span> zusätzlich: </span><code>onAttach/onDetach</code
          ><span> (Fragment an Activity), </span
          ><code>onCreateView/onDestroyView</code
          ><span> (Fragment erstellen/zerstören), </span
          ><code>onActivityCreated</code
          ><span>. Parameter werden immer als </span><code>Bundle</code
          ><span> übergeben, nie als Konstruktor.</span>
          <strong><span>Vorteile</span></strong
          ><span
            >: Wiederverwendbarkeit, Wartbarkeit (kleinere Codeblöcke),
            Flexibilität durch mögliche Unterscheidung Smartphone vs. Tablet. </span
          ><strong><span>Verschachtelung</span></strong
          ><span> möglich, innerhalb Fragment kann </span
          ><code>getChildFragmentManager()</code><span> verwendet werden.</span>
        </p>
        <p>
          <img
            src="res/fragment_lifecycle.png"
            referrerpolicy="no-referrer"
            alt="fragment lifecycle"
          />
        </p>
        <p>
          <strong><span>Statische Einbindung</span></strong
          ><span
            >: Verhalten wie Activities. Erlaubt keine/kaum Interaktion zwischen
            Activity und Fragment.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang=""
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">(MainActivity.java -(setContentView)-&gt; activity_main.xml -(xml-fragment)-&gt; outputFragment.java -(super(R.id....))-&gt; fragment_output.xml)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre>
        <p>
          <strong><span>Dynamische Einbindung</span></strong
          ><span>: Platzhalter </span><code>FragmentContainerView</code
          ><span> im XML. Activity verwendet Objekt </span
          ><code>FragmentManager</code><span>. </span
          ><em><span>Vorteile</span></em
          ><span
            >: Austauschbar zur Laufzeit, Parameterübergabe möglich, reagieren
            auf Ereignisse im Fragment möglich. Ebenso sind Animationen möglich
            beim Austauschen, definition in XML Files </span
          ><code>res/anim</code><span>. Add to Back Stack ist optional.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="utf-8"?&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">androidx.constraintlayout.widget.ConstraintLayout</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">...</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-error">&lt;androidx.fragment.app.FragmentContainerView</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  tools:layout="@layouts/fragment_infos" /&gt;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">/&gt;</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="bash"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Fragment Manager <span class="cm-operator">=</span> getSupportFragmentMAnager() &nbsp;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Fragment Transaction <span class="cm-operator">=</span> mgr.beginTransaction()</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 52px;"></div><div class="CodeMirror-gutters" style="display: none; height: 52px;"></div></div></div></pre>
        <p><span>Kommunikation Activity &gt;&gt; Fragment </span></p>
        <ul>
          <li>
            <span
              >Informationen können via Bundle-Objekt übergeben werden.</span
            >
          </li>
          <li>
            <span>Erstellen und übergeben von Bundle mit </span
            ><code>OutputFragment.create()</code><span> (Java) bzw. </span
            ><code>newInstance()</code><span> (Kotlin).</span><br /><span
              >Deshalb weil der Konstruktor-Parameter nicht neu ausgeführt wird,
              z.B. bei Rotation des Gerätes.</span
            >
          </li>
          <li>
            <span
              >Public Methoden auf dem Fragment können von der Activity
              aufgerufen werden.</span
            >
          </li>
        </ul>
        <p>
          <span>Kommunikation Fragment &gt;&gt; Activity </span
          ><strong><span>nur</span></strong
          ><span>
            via Implementation von Callback-Interface (Dependency
            Inversion).</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
          style="break-inside: unset"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">interface</span> <span class="cm-def">OutputFragmentCallback</span> { <span class="cm-variable-3">void</span> <span class="cm-variable">onTextTapped</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">text</span>); }</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MainActivity</span> <span class="cm-keyword">implements</span> <span class="cm-variable">OutputFragmentCallback</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onTextTapped</span>(<span class="cm-variable-3">String</span> <span class="cm-variable">text</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// was passiert on tap?</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">OutputFragment</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Fragment</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">OutputFragmentCallback</span> <span class="cm-variable">callback</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onAttach</span> (<span class="cm-variable">Context</span> <span class="cm-variable">context</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">onAttach</span>(<span class="cm-variable">context</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">try</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">callback</span> <span class="cm-operator">=</span> (<span class="cm-variable">OutputFragmentCallback</span>) <span class="cm-variable">context</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">catch</span> (<span class="cm-variable">ClassCastException</span> <span class="cm-variable">e</span>) { <span class="cm-comment">/* exception handling */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onViewCreated</span>(<span class="cm-variable">View</span> <span class="cm-variable">view</span>, ... ) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">textOutput</span> <span class="cm-operator">=</span> <span class="cm-variable">view</span>.<span class="cm-variable">findViewById</span>(<span class="cm-variable">R</span>.<span class="cm-variable">id</span>.<span class="cm-variable">output_text</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">textOutput</span>.<span class="cm-variable">setOnClickListener</span>(<span class="cm-variable">v</span> <span class="cm-operator">=&gt;</span> { <span class="cm-variable">callback</span>.<span class="cm-variable">onTextTapped</span>(<span class="cm-string">"..."</span>); });</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">fragment</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 520px;"></div><div class="CodeMirror-gutters" style="display: none; height: 520px;"></div></div></div></pre>
        <h2 id="styling-mit-themes"><span>Styling mit Themes</span></h2>
        <p>
          <span
            >Probleme von Attributen direkt auf XML Elementen:
            Code-Duplizierung, Inkonsistenzen und Unübersichtlichkeit. </span
          ><strong><span>Styles</span></strong
          ><span> sind Value-Resourcen in </span
          ><code>res/values/styles.xml</code
          ><span
            >, die Formatierungen wiederverwendbar machen. Qualifiers auch
            möglich. Werden vom Build System ausgewertet.
          </span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
          style="break-inside: unset"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span> <span class="cm-attribute">name</span>=<span class="cm-string">"HeaderText"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:textSize"</span><span class="cm-tag cm-bracket">&gt;</span>24sp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:background"</span><span class="cm-tag cm-bracket">&gt;</span>#ff9999<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:padding"</span><span class="cm-tag cm-bracket">&gt;</span>8dp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:layout_margin"</span><span class="cm-tag cm-bracket">&gt;</span>8dp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:gravity"</span><span class="cm-tag cm-bracket">&gt;</span>center<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span> <span class="cm-attribute">name</span>=<span class="cm-string">"HeaderText.Big"</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!-- Vererbung möglich, beinhaltet auch alle Werte von HeaderText --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:textSize"</span><span class="cm-tag cm-bracket">&gt;</span>40sp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!-- Variante 2: parent-Attribut setzen --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- Anwendung in Layout --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">TextView</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_width</span>=<span class="cm-string">"match_parent"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_height</span>=<span class="cm-string">"wrap_content"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:text</span>=<span class="cm-string">"Element 1"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">style</span>=<span class="cm-string">"@style/HeaderText"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">TextView</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_width</span>=<span class="cm-string">"match_parent"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_height</span>=<span class="cm-string">"wrap_content"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:text</span>=<span class="cm-string">"Element 2"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">style</span>=<span class="cm-string">"@style/HeaderText.Big"</span><span class="cm-tag cm-bracket">/&gt;</span> <span class="cm-comment">&lt;!-- Kein Namespace! --&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 546px;"></div><div class="CodeMirror-gutters" style="display: none; height: 546px;"></div></div></div></pre>
        <p>
          <strong><span>Themes</span></strong
          ><span
            >: Standard-Style kann für ganze App oder Activity festgelegt
            werden. Nur noch Abweichungen müssen als Style definiert werden.
            Theme in </span
          ><code>res/values/styles.xml</code><span>, </span><code>parent</code
          ><span
            >-Attribut definiert Abhängigkeit von allgemeinen Themes.
          </span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">resources</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span> <span class="cm-attribute">name</span>=<span class="cm-string">"AppTheme"</span> <span class="cm-attribute">parent</span>=<span class="cm-string">"…"</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!-- Parent definiert Grund-Theme --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:textViewStyle"</span><span class="cm-tag cm-bracket">&gt;</span>@style/MyText<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!-- Macht MyText Standard f. TextView --&gt;</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">style</span> <span class="cm-attribute">name</span>=<span class="cm-string">"MyText"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:textSize"</span><span class="cm-tag cm-bracket">&gt;</span>24sp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:background"</span><span class="cm-tag cm-bracket">&gt;</span>#ff9999<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:padding"</span><span class="cm-tag cm-bracket">&gt;</span>8dp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:layout_margin"</span><span class="cm-tag cm-bracket">&gt;</span>8dp<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">item</span> <span class="cm-attribute">name</span>=<span class="cm-string">"android:gravity"</span><span class="cm-tag cm-bracket">&gt;</span>center<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">item</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">style</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">resources</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 338px;"></div><div class="CodeMirror-gutters" style="display: none; height: 338px;"></div></div></div></pre>
        <p>
          <strong><span>Einbindung</span></strong
          ><span>
            vom Theme im Manifest in Application/Activity XML Node, oder via </span
          ><code>setTheme()</code><span> in </span><code>onCreate()</code
          ><span> Methode.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">application</span> <span class="cm-attribute">…</span> <span class="cm-attribute">android:theme</span>=<span class="cm-string">"@style/AppTheme"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">activity</span> <span class="cm-attribute">…</span> <span class="cm-attribute">android:theme</span>=<span class="cm-string">"@style/AnotherAppTheme"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">application</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 79px;"></div><div class="CodeMirror-gutters" style="display: none; height: 79px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Override</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-def">onCreate</span>(<span class="cm-variable">Bundle</span> <span class="cm-variable">savedInstanceState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">setTheme</span>(<span class="cm-variable">R</span>.<span class="cm-variable">style</span>.<span class="cm-variable">AnotherAppTheme</span>); <span class="cm-comment">// ZWINGEND VOR setContentView</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">setContentView</span>(<span class="cm-variable">R</span>.<span class="cm-variable">layout</span>.<span class="cm-variable">activity_styling</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 130px;"></div><div class="CodeMirror-gutters" style="display: none; height: 130px;"></div></div></div></pre>
        <p>
          <span>Hierarchie der verschiedenen Definitionen: </span
          ><strong><span>Attribute via Code</span></strong
          ><span> vor </span><strong><span>Attribute via XML</span></strong
          ><span> vor </span><strong><span>Style via XML</span></strong
          ><span> vor </span><strong><span>Standard-Styles</span></strong
          ><span> vor </span><strong><span>Theme</span></strong
          ><span> vor </span
          ><strong><span>TextAppearance (Material Design)</span></strong>
        </p>
        <h2 id="material-design"><span>Material Design</span></h2>
        <p>
          <span>Einbinden: Android SDK mit </span><code>Theme.Material.*</code
          ><span>, AndroidX mit </span><code>Theme.AppCompat.*</code
          ><span>, beste Unterstützung mit </span
          ><strong><span>Material Components Library</span></strong
          ><span>: </span><code>Theme.MaterialComponents.*</code>
        </p>
        <p>
          <span
            >Design Language von Google. Hilfestellung für Designprozess.
            Beschreibt, wie einzelne Teile der Applikation aussehen und sich
            verhalten sollten. Teils Regeln, teils Empfehlungen und Beispiele. </span
          ><strong><span>Ziel</span></strong
          ><span
            >: konsistentes und benutzbares Look-and-Feel, möglichst systemweit.
            Beispiel von </span
          ><em><span>Human-Interface Guidelines</span></em
          ><span>.</span>
        </p>
        <p>
          <img
            src="res/materialdesign-mindmap.png"
            referrerpolicy="no-referrer"
            alt="material design"
          />
        </p>
        <p>
          <span>Ideen: </span
          ><em
            ><strong><span>Material is the Metaphor</span></strong></em
          ><span
            >: Material ist immer 1dp dick, wie Papier. Material wirft Schatten.
            Material hat eine unendliche Auflösung -&gt; SVG-Grafiken. Inhalt
            hat keine Dicke und ist Teil des Materials. </span
          ><strong><span>*Bold, graphic, intentional: *</span></strong
          ><span>
            basiert auf prinzipien von Print-Medien bezgl. Hierarchie, Raster,
            Schriften, Farben, ... </span
          ><em
            ><strong><span>Motion provides Meaning</span></strong></em
          ><span
            >: Material kann sich verändern. Material kann sich bewegen.
            Bewegung bedeutet Aktion -&gt; Zurückhaltend verwenden.</span
          >
        </p>
        <p>
          <strong><span>Farben:</span></strong
          ><span>
            Primärfarbe in verschiedenen Abstufungen, optionale
            Sekundär-/Akzentfarbe. Tools existieren zur Farbwahl. Anpassen in
            Themes, </span
          ><code>colorPrimary, colorPrimaryDark, colorAccent</code
          ><span> etc., gilt für viele Controls. </span
          ><strong><span>Icons:</span></strong
          ><span> Library von Material Design zur freien Verwendung </span
          ><strong><span>Layouts:</span></strong
          ><span> 8dp Raster ist Basis für Ausrichtung </span
          ><strong><span>Components:</span></strong
          ><span>
            Material Design umfasst zusätzliche Software-Libraries mit GUI
            Elementen (Controls) </span
          ><strong><span>Text:</span></strong
          ><span> Vordefinierte Styles mit </span><code>style</code
          ><span> oder </span><code>android:textApperance</code
          ><span> Attribut auf </span
          ><code>@style/TextAppearance.MaterialComponents.Headline3</code
          ><span>.</span>
        </p>
        <p>
          <img src="res/android-material.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <span
            >Einbindung prüfen, wenn die IDE vorschlägt... Button z.b aus
            AndroidSDK, AndoridX, Material Design möglich.</span
          >
        </p>
        <p>
          <strong><span>Material You</span></strong
          ><span
            >: Android 12+ als weiterentwicklung von Material Design, um wieder
            mehr Individualisierung in die Apps zu bringen. Mehr Farben, mehr
            Animationen, mehr </span
          ><em><span>abgerundete Ecken</span></em
          ><span>.</span>
        </p>
        <h1 id="android-berechtigungen-persistenz-hardwarezugriff">
          <span>Android Berechtigungen, Persistenz, Hardwarezugriff</span>
        </h1>
        <h2 id="berechtigungen"><span>Berechtigungen</span></h2>
        <ul>
          <li>
            <span>Normale (</span><em><span>install-time</span></em
            ><span
              >) Berechtigungen: im Android Manifest definiert. Wird während der
              Installation beim System angefragt und automatisch erteilt.</span
            >
          </li>
          <li>
            <span>Gefährliche (</span><em><span>run-time</span></em
            ><span
              >) Berechtigungen: Werden zur Laufzeit beim User angefragt (Pop-Up
              Meldung).</span
            >
          </li>
        </ul>
        <p>
          <strong><span>Selektives Ablehnen</span></strong
          ><span>
            von Berechtigungen erst seit API 23 (Android 6.0) möglich. Vorher
            wurden sämtliche Berechtigungen beim Installieren der App erteilt
            oder die App nicht installiert. </span
          ><strong><span>Einmaliges Erlauben</span></strong
          ><span> seit API 30 (Android 11.0), wie auch </span
          ><strong><span>automatisches Zurücksetzen</span></strong
          ><span> vom System.</span>
          <strong><span>Nachträchliches Entziehen</span></strong
          ><span>
            von Berechtigungen ist jederzeit möglich, vom User oder vom System.
            Check im Code also vor jeder Verwendung einer API nötig, sonst
            fliegt </span
          ><code>SecurityException</code><span>. App wird beim </span
          ><strong><span>Anpassen von Berechtigungen</span></strong
          ><span> sofort beendet.</span>
          <strong><span>Best Practices:</span></strong
          ><span>
            Nur anfordern, was wirklich benötigt wird. Im Kontext der Verwendung
            anfordern. Transparente Erklärungen. Abbruch ermöglichen.
            Verweigerung berücksichtigen und Alternativen anbieten.</span
          >
        </p>
        <h3 id="manifest-definition"><span>Manifest Definition</span></h3>
        <p>
          <code>uses-permission</code
          ><span>
            im Manifest resultiert auch in einem Filter für den Google Play
            Store. Beispielsweise: App wird nur für Geräte mit Kamera angeboten.
            Um das auszuschalten das </span
          ><code>uses-feature</code><span> verwenden, mit </span
          ><code>android:required=false</code><span>.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.CAMERA"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-permission</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.permission.CAMERA"</span> <span class="cm-attribute">android:maxSdkVersion</span>=<span class="cm-string">"28"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!-- Obergrenze API: neuer wird die Berechtigung nicht mehr benötigt? --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">uses-feature</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">"android.hardware.location"</span> <span class="cm-attribute">android:required</span>=<span class="cm-string">"false"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre>
        <h3 id="im-code"><span>Im Code</span></h3>
        <p>
          <span>Abfrage </span
          ><code
            >if (shouldShowRequestPermissionRationale(permission)) { .. mehr
            info anzeigen .. }</code
          ><span>
            wird beim ersten Anfordern der Berechtigungen ausgeführt. Liefert
            auch </span
          ><code>true</code><span> nach erstmaliger Verweigerung. </span
          ><code>onRequestPermissionResult(...)</code
          ><span>
            wird aufgerufen, sobald der User eine Option gewählt hat. </span
          ><code>requestPermissions(..., CALLBACK_CODE)</code
          ><span>
            kann definieren, woher im Code die Anfrage kommt. Lehnt der User die
            Anfrage wiederholt ab, gilt es automatisch als &quot;Nicht mehr
            Fragen&quot;. Dem User wird keine Anfrage mehr angezeigt.</span
          >
        </p>
        <h2 id="persistenz"><span>Persistenz</span></h2>
        <h3 id="varianten--mechanismen">
          <span>Varianten / Mechanismen</span>
        </h3>
        <p>
          <span>App-Intern: </span>
          <strong><span>App-Spezifische Dateien:</span></strong
          ><span>
            Beliebiges Format. Werden beim Deinstallieren der App gelöscht.
            Geschützt vor fremdem Zugriff. Bsp: Domänenobjekte als JSON. Zugriff
            via File Klasse und Methoden auf Context: </span
          ><code
            >getFilesDir, getCacheDir, getExternalFilesDir,
            getExternalCacheDir</code
          >
          <strong><span>Preferences:</span></strong
          ><span> Key-Value Paare, Bsp: Benutzereinstellungen. </span>
          <strong><span>Datenbanken</span></strong
          ><span
            >: strukturierte Daten, Bsp: umfangreiche Domänenobjekte. Varianten
            SQLite direkt oder Abstraktion via OR Mapper RoomDb, basierend auf
            Java Annotations.</span
          >
          <span>App-übergreifend: </span>
          <strong><span>Medien:</span></strong
          ><span>
            Bilder, Dokumente, Musik und Videos. Ohne UI-Dialog, benötigt ggf.
            Berechtigungen. Bleiben bei Deinstallation erhalten. Ab API 29 nur
            noch für das Lesen fremder Daten Berechtigungen nötig, vorher auch
            für eigene. Schreiben in fremde Ordner nicht möglich. Zugriff via </span
          ><code>MediaStore</code><span> Content Provider.</span>
          <strong><span>Dokumente:</span></strong
          ><span>
            Beliebige Dateiformate. Mit UI-Dialog (delegiert an andere App - wo
            speichern?), keine Berechtigungen benötigt. Bleiben bei
            Deinstallation erhalten. Zugriff via Storage Access Framework,
            Kombination aus Intents und CPs.</span
          >
        </p>
        <p>
          <strong><span>Content Providers</span></strong
          ><span>
            (Server) und Resolvers (Client): Datenquelle für andere Apps. SQL
            ähnliche, standardisierte Schnittstelle. Diverse Provider von
            Android implementiert: Kalender, Kontakte, Medien, Dokumente,
            Wörterbuch.. Methoden für CRUD Operationen, Cursor zur Iteration
            über Ergebnisse. Berechtigung nötig für Zugriff.</span
          >
        </p>
        <h3 id="verschiedene-speicherorte">
          <span>Verschiedene Speicherorte</span>
        </h3>
        <p>
          <span
            >Intern (flash): meist app-spezifische Daten, geschützter
            Speicherbereich pro App. </span
          ><code>/data/data/{App-id}</code>
          <span
            >Extern (sdcard oder emuliert auf flash): grössere Datein, mit
            anderen Apps geteilt. </span
          ><code>/sdcard/Android/data/{App-id}</code>
          <span>Öffentliche Daten: </span><code>/sdcard/Download</code
          ><span>, </span><code>/sdcard/Movies</code><span>, </span
          ><code>/sdcard/Music</code><span>, </span
          ><code>/sdcard/Pictures</code>
        </p>
        <p>
          <img
            src="res/speicher-uebersicht.png"
            referrerpolicy="no-referrer"
            alt="Speicherarten"
          />
        </p>
        <p>
          <span
            >Debugging-Tools: Device File Explorer, Database Inspector. Export
            aller Daten einer App auch möglich, via cli-Befehle.
          </span>
          <code>adb backup -noapk &lt;APPID&gt;</code><span> &amp; </span
          ><code>java -jar abe.jar unpack backup.ab backup.tar</code>
        </p>
        <h2 id="hardwarezugriff"><span>Hardwarezugriff</span></h2>
        <p>
          <span
            >Sensor Framework soll für alle möglichen Sensoren die gleiche
            Bedienung bieten. </span
          ><code>Sensor Manager</code
          ><span> ist Einstiegspunkt zur Verwendung von Sensordaten. </span
          ><code>Sensor</code><span> repräsentiert Hardwaresensor. </span
          ><code>SensorEvent</code><span> enthält aktuelle Werte, </span
          ><code>SensorEventListener</code
          ><span> verwenden für Callbacks.</span>
        </p>
        <p>
          <strong><span>Verzögerung</span></strong
          ><span>
            beeinflusst den Energieverbrauch: Festlegen mit verschiedenen Werten </span
          ><code>SensorManager.SENSOR_DELAY_XX</code
          ><span> Werte aufsteigend sind Fastest, Game, UI, Normal. </span
          ><strong><span>Genauigkeit</span></strong
          ><span> löst Callback aus bei Änderungen: </span
          ><code>SENSOR_STATUS_ACCURACY_XX</code
          ><span> : high, medium, low, unreliable.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
          style="break-inside: unset"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Bei Sensor auf Änderungen registrieren</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">String</span> <span class="cm-variable">service</span> <span class="cm-operator">=</span> <span class="cm-variable">Context</span>.<span class="cm-variable">SENSOR_SERVICE</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">type</span> <span class="cm-operator">=</span> <span class="cm-variable">Sensor</span>.<span class="cm-variable">TYPE_LIGHT</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">delay</span> <span class="cm-operator">=</span> <span class="cm-variable">SensorManager</span>.<span class="cm-variable">SENSOR_DELAY_NORMAL</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">SensorManager</span> <span class="cm-variable">mgr</span> <span class="cm-operator">=</span> (<span class="cm-variable">SensorManager</span>)<span class="cm-variable">getSystemService</span>(<span class="cm-variable">service</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">Sensor</span> <span class="cm-variable">sensor</span> <span class="cm-operator">=</span> <span class="cm-variable">mgr</span>.<span class="cm-variable">getDefaultSensor</span>(<span class="cm-variable">type</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">mgr</span>.<span class="cm-variable">registerListener</span>(<span class="cm-keyword">this</span>, <span class="cm-variable">sensor</span>, <span class="cm-variable">delay</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">// Implementierung von SensorEventListener</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">onSensorChanged</span>(<span class="cm-variable">SensorEvent</span> <span class="cm-variable">sensorEvent</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">float</span> <span class="cm-variable">lux</span> <span class="cm-operator">=</span> <span class="cm-variable">sensorEvent</span>.<span class="cm-variable">values</span>[<span class="cm-number">0</span>]; <span class="cm-comment">// Inhalt abhängig von Sensortyp</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">Log</span>.<span class="cm-variable">d</span>(<span class="cm-atom">null</span>, <span class="cm-variable">lux</span> <span class="cm-operator">+</span> <span class="cm-string">" lux"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-def">onAccuracyChanged</span>(<span class="cm-variable">Sensor</span> <span class="cm-variable">sensor</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">i</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 416px;"></div><div class="CodeMirror-gutters" style="display: none; height: 416px;"></div></div></div></pre>
        <p>
          <span
            >Sensortypen, möglich sind Hardware vs. Software (basiert auf
            Berechnung aus anderen Hardware-Sensoren): </span
          ><em
            ><span
              >Accelerometer, Ambient_Temperature, Gravity, Gyroscope, Light,
              Linear_Acceleration, Magnetic_Field, Orientation, Pressure,
              Proximity, Relative_Humidity, Rotation_Vector, Temperature</span
            ></em
          >
        </p>
        <p>
          <strong><span>Vibration</span></strong
          ><span>: Für haptisches Feedback. Klasse </span><code>Vibrator</code
          ><span
            >. Ab API 26 sind Effekte möglich, API 29 bringt vordefinierte
            Effekte. Keine AndroidX Alternative vorhanden, API Checks zwingend!
            Berechtigung </span
          ><code>VIBRATE</code><span> nötig.</span>
        </p>
        <p>
          <strong><span>Connectivity</span></strong
          ><span
            >: Fokus Mobilfunk / WiFi. REST-Calls mit verschiedenen Varianten
            möglich, Berechtigung </span
          ><code>INTERNET</code><span> zwingend. </span
          ><strong><span>V1</span></strong
          ><span> mit </span><code>HttpsURLConnection</code
          ><span> ist Teil der Android SDK, API 1. </span
          ><strong><span>V2</span></strong
          ><span> mit </span><code>OkHttp</code
          ><span>
            ist effiziente Alternative, ab API 21. 3rd Party Library. </span
          ><strong><span>V3</span></strong
          ><span> </span><code>Retrofit</code
          ><span>
            bietet erweiterte Funktionalität auf OkHttp basierend, wie Konverter
            zur Serialisierung und die Definition von Endpunkten und
            Datenobjekten. 3rd Party Library. </span
          ><code>Call.execute()</code><span> vs. </span
          ><code>Call.enqueue()</code
          ><span> für Background-Kommunikation.</span>
          <span
            >Netzwerkkommunikation ist auf Main-Thread nicht erlaubt. Verbindung
            (WLAN/Mobile) muss nicht selber definiert werden, Android wählt aus
            (Geschwindigkeit, Signalqualität, Vermeiden von Roaming). Kann
            jedoch abgefragt werden über Klasse </span
          ><code>ConnectivityManager</code><span>. Berechtigun </span
          ><code>ACCESS_NETWORK_STATE</code><span>. </span
          ><strong><span>Statusänderungen</span></strong
          ><span> werde via Broadcasts übermittelt.</span>
        </p>
        <p>
          <strong><span>Positionsbestimmung:</span></strong
          ><span>
            Aggregation von verschiedenen Datenquellen: GPS, verbundene
            Mobilfunkzelle, verbundenes Wifi. Ohne Google-Dienste: </span
          ><code>LocationManager</code><span>, mit Google-Dienste: </span
          ><code>Fused Location Provider</code><span>. Berechtigungen </span
          ><code
            >ACCESS_COARSE_LOCATION, ACCESS_FINE_LOCATION,
            ACCESS_BACKGROUND_LOCATION</code
          ><span
            >. API: Agggregierung verschiedener Datenquellen und abonnieren von
            Positionsupdates.</span
          >
        </p>
        <p>
          <strong><span>Kamera:</span></strong
          ><span>
            App via Intent (empfohlen, weniger Komplexität), Camera-API,
            Camera2-API, CameraX-API (mehr Möglichkeiten und Kontrolle)</span
          >
        </p>
        <h1 id="android-architektur-und-fortgeschrittenes">
          <span>Android Architektur und Fortgeschrittenes</span>
        </h1>
        <h2 id="software-architektur"><span>Software-Architektur</span></h2>
        <p>
          <span
            >Zerlegung grösserer Systeme in Teile verbessert Wartbarkeit und
            Verständlichkeit. </span
          ><strong><span>Schichten</span></strong
          ><span>
            gruppieren zusammengehörige Konzepte. Keine Zyklen wenn
            Abhängigkeiten nur nach unten zeigen. Presentation-Schicht
            beinhaltet Darstellung und Benutzerinteraktion, stark an UI-Tools
            gebunden. Domain-Schicht beinhaltet Businesslogik und
            Domänenklassen. Keine UI Funktionalität, einfach zu testen. Wenig
            externe Abhängigkeiten. Datenschicht dient der Speicherung,
            Bereitstellung von Daten. Auch Persistenz oder Datenhaltung genannt. </span
          ><strong><span>Variationen</span></strong
          ><span
            >: Mehr als 3 Schichten, zusätzlich vertikale Zerlegung nach
            Feature, Presentation Patterns (MVC, MVP, MVVM)</span
          >
        </p>
        <p><img src="res/schichten.png" alt="Schichten" style="zoom: 67%" /></p>
        <p>
          <span
            >Fundament der Software soll nicht Daten sein, sondern Domäne. In
            der neueren (Clean Code-) </span
          ><strong><span>Ringarchitektur</span></strong
          ><span>
            ist auch die Datenbank in der äussersten Schicht, ändert also
            potenziell oft. Je weiter innen, desto stabiler. &quot;Technische
            Details&quot; sind aussen. Domäne bildet den Kern.</span
          >
        </p>
        <p><img src="res/clean_code.png" alt="Ringe" style="zoom: 50%" /></p>
        <p>
          <strong><span>Ziele in MGE</span></strong
          ><span
            >: UI Code gruppieren, von restlichem Code trennen und bestmöglich
            testbar machen.</span
          >
        </p>
        <h2 id="observer-pattern"><span>Observer Pattern</span></h2>
        <p>
          <span
            >Dient der &quot;Rückmeldung&quot; von Domain zu Presentation bei
            Änderungen an den Daten. </span
          ><strong><span>Subject/Observable</span></strong
          ><span
            >: Das Ding, das ändern kann, also innerhalb der Domäne. Bietet </span
          ><code>Attach()/Detach()</code><span>-Funktionen. Eine </span
          ><code>Notify()</code><span> Funktion führt </span
          ><code>Update()</code><span> auf allen registrierten </span
          ><strong><span>Observern</span></strong
          ><span>
            (GUI-Elementen) aus. Ergo: Observer kennt Subject, umgekehrt nicht. </span
          ><em><span>Wichtig</span></em
          ><span>: Anmelden wenn die App sichtbar ist (</span
          ><code>onResume</code
          ><span>), abmelden wenn die App im Hintergrund ist (</span
          ><code>onPause</code
          ><span
            >). Ansonsten werden unnötige Ressourcen verschwendet, GUI
            aktualisiert das nicht sichtbar ist.
          </span>
        </p>

        <p class="pagebreak">
          <img
            src="res/android-observerpattern.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <p>
          <span
            >Grundlegend &quot;manuelle&quot; Implementation für jedes Objekt,
            komplex und aufwändig. Wer observiert Wen? An-/Abmelden korrekt
            überall? Vereinfachte, allgemeine Implementation nötig...</span
          >
        </p>
        <h2 id="grundlagen-architektur"><span>Grundlagen Architektur</span></h2>
        <p>
          <img src="res/mvc.png" alt="MVC" style="zoom: 50%" /><span> </span
          ><img src="res/mvp.png" alt="MVP" style="zoom: 50%" /><img
            src="res/mvvm.png"
            alt="MVVM"
            style="zoom: 50%"
          />
        </p>
        <p>
          <strong><span>Model View Controller</span></strong
          ><span
            >: Basis (lose) für Android. Kritik: Controller (Activity/Fragments)
            wird schnell extrem umfangreich und schwierig zu testen wegen
            Referenzen auf UI. </span
          ><strong><span>Model View Presenter:</span></strong
          ><span> Keine Verbindung zwischen View und Model. </span
          ><strong><span>Model View ViewModel:</span></strong
          ><span> Siehe Woche 7.</span>
        </p>
        <h2 id="android-application"><span>Android: Application</span></h2>
        <p>
          <span>Wird im AndroidManifest als </span
          ><code>&lt;application&gt;</code
          ><span>
            - Knoten definiert. Instanz wird beim Start der App erstellt - lebt
            solange die App läuft. Aufbau nach Standard oder selber definiert
            als abgeleitete Klasse. Kann verwendet werden für einmalige
            Initialisierungen, erzeugen von Singleton Objekten, Zugriff / Halten
            von globalen Objekten etc. Hat verschiedene Lifecycle-Methoden wie
          </span>
          <code>onCreate, onTerminate</code
          ><span> (wird NIE aufgerufen), </span>
          <code>onConfigurationChanged(newConfig)</code
          ><span>
            bei Änderungen der System-Konfig wie Sprache, Rotation des Geräts,
          </span>
          <code>onLowMemory</code
          ><span>
            bei Speicherknappheit, Hinweis auf mögliche Terminierung der App,
          </span>
          <code>onTrimMemory(level)</code
          ><span>
            in geeigneten Momente für Aufräumaktion, Parameter gibt Hinweis auf
            Auslöser.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">application</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">".MyApplication"</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!-- Unsere Activities etc..  --&gt;</span> <span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">application</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre>
        <p>
          <code>Application.ActivityLifecycleCallbacks</code
          ><span>
            ist ein Interface, dass implementiert werden kann um von allen
            Activities die Lifecycle-Events zentral verwalten zu können. Bietet
            überschreibbare Methoden wie </span
          ><code>onActivityCreated()</code
          ><span>
            mit der auslösenden Activity im Parameter. Gut für zentrales Logging
            etc.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 10.9999px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MyApplication</span> <span class="cm-keyword">extends</span> <span class="cm-variable">Application</span> <span class="cm-keyword">implements</span> <span class="cm-variable">Application</span>.<span class="cm-variable">ActivityLifecycleCallbacks</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onCreate</span>() { </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">onCreate</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">registerActivityLifecycleCallbacks</span>(<span class="cm-keyword">this</span>); <span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">// Wichtig!</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onActivityCreated</span>(<span class="cm-variable">Activity</span> <span class="cm-variable">activity</span>) { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 237px;"></div><div class="CodeMirror-gutters" style="display: none; height: 237px;"></div></div></div></pre>
        <h2 id="context"><span>Context</span></h2>
        <p>
          <span
            >Abstrakte SDK Klasse mit vielen (50+) Ableitungen. Ermöglicht den </span
          ><strong><span>Zugriff auf Dienste und Ressourcen</span></strong
          ><span>
            der App. Verschiedene Ableitungen haben verschiedene Möglichkeiten.
            Activity hat andere &quot;Berechtigungen&quot; als Application.
            Lebensdauer des Context hängt vom aufrufenden Objekt ab,
            angeforderte Ressourcen werden wiederum mit dem zugehörigen Context
            freigegeben. </span
          ><strong><span>Vorsicht</span></strong
          ><span>
            beim Weitergeben von Context zwischen verschiedenen Activities etc..
          </span>
        </p>
        <p>
          <img
            src="res/context-overview.png"
            alt="Context table"
            style="zoom: 50%"
          />
        </p>
        <h2 id="brodacasts"><span>Brodacasts</span></h2>
        <p>
          <span>Sind normale Intent-Objekte, </span><code>Action</code
          ><span>
            im Intent definiert den Typ als string mit globaler Namensgebung.
            Deshalb idealerweise package-Name einbauen. Parameter sind als
            Intent-Extras möglich. 2 Varianten für Broadcasts:</span
          >
        </p>
        <p>
          <strong><span>Global:</span></strong
          ><span>
            Austausch von Meldungen zwischen Apps. Datenquelle meist Android
            (auch eigene App möglich). Empfänger verschiedene Apps, die sich
            registrieren. </span
          ><strong><span>Beispiel</span></strong
          ><span>: Netzwerkverbindung verloren, SMS empfangen, ...</span>
        </p>
        <p>
          <strong><span>Lokal</span></strong
          ><span
            >: Innerhalb App. Bsp. zum Senden von Benachrichtigung, die via
            Android OS wieder zurück kommt und von einer komplett separaten
            Komponente verarbeitet werden kann. Für App-Lokale Nachrichten gibt
            es einen </span
          ><code>LocalBroadcastManager</code><span>.</span>
        </p>
        <p>
          <span
            >Wichtig: keinen sensitiven Daten übermitteln, App-ID integrieren.
            Ableiten von Basisklasse Broadcast, Registrieren der Klasse auf
            bestimmte Nachrichten. Alt: im Manifest registriert, nur noch
            eingeschränkt möglich. Neu dynamisch im Code mit </span
          ><code>Context.registerReceiver()</code><span>.</span>
        </p>
        <h2 id="services"><span>Services</span></h2>
        <p>
          <span
            >Threads entkoppeln Aufgaben vom UI, Services entkoppeln Aufgaben
            von einer Activity / der App: Ausführen von Aktionen im Hintergrund,
            Lebenszyklus unabhängig. Wird auch mittels Intent gestartet.</span
          >
          <strong><span>Started Services</span></strong
          ><span>
            haben eine klar definierte Lebensdauer, gedacht für einmalige
            Aufgaben (bsp. Download: klares Ende). UI nur innerhalb einer
            Notification (Foreground) oder gar keines (Background). Werden
            etweder durch Service selber </span
          ><code>stopSelf</code><span>, eine Applikation </span
          ><code>service.stopService</code
          ><span> oder durch Android beendet. Varianten: </span
          ><code>IntentService</code><span> und </span
          ><code>JobIntentService</code
          ><span>
            für Ausführung einer Aktion im BackgroundThread und automatischer
            Stopp. </span
          ><code>onStartCommand</code
          ><span>
            hat einen Rückgabewert für verschiedene Arten von gewünschten
            Neustarts:
          </span>
          <code>START_NOT_STICKY</code
          ><span>: Automatischer Neustart nur bei unverarbeiteten Intents</span>
          <code>START_STICKY</code
          ><span
            >: Automatischer Neustart mit nächstem anstehenden Intent oder </span
          ><code>null</code> <code>START_REDELIVER_INTENT</code
          ><span
            >: Automatischer Neustart mit zuletzt verarbeitetem Intent.</span
          >
          <strong><span>Bound Services</span></strong
          ><span>
            leben so lange, wie sie verwendet werden (Musikplayer). Nach letztem
            Disconnect wird der Service gestoppt. Können von verschiedenen Apps
            oder Activities gesteuert werden. </span
          ><code>onBound/onUnbound</code
          ><span>
            bei Verbindung von einer Activity. Ähnlich Client/Server
            Kommunikation. Registrierung der verwendeten Services im Manifest
            zwingend.
          </span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">service</span> <span class="cm-attribute">android:name</span>=<span class="cm-string">".services.MyStartedService"</span> <span class="cm-attribute">android:exported</span>=<span class="cm-string">"false"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 26px;"></div></div></div></pre>
        <h2 id="deployment"><span>Deployment</span></h2>
        <p>
          <span>Installation von Apps aus </span><code>.apk</code
          ><span>
            Dateien. Dies sind Zip-Archive, können über beliebige Kanäle
            verteilt werden und enthalten alle zur Ausführung nötigen Daten. </span
          ><code>.apk</code
          ><span>
            aus dem Play Store sind von Google signiert, alle anderen gelten als
            unbekannte bzw. unsichere Apps. Privater Schlüssel als Developer gut
            aufbewahren, für Updates im Store zwingend nötig.
          </span>
          <strong><span>Bundeln</span></strong
          ><span> von verschiedenen </span><code>.apk</code><span> in ein </span
          ><code>.aab</code><span> (Android App Bundle, Nachfolger von </span
          ><code>.apk</code
          ><span
            >) möglich. Beispiel verschiedene Versionen (x86/x64) der App. Aus
            dem </span
          ><code>.aab</code
          ><span>
            wird auf den Google Servern bei Download dynamisch das passende </span
          ><code>.apk</code
          ><span>
            generiert (Sprache, CPU, ...). Optimiert die Dateigrösse, bietet
            verschiedene Delivery Kanäle für Features oder Assets. </span
          ><em
            ><span
              >Vorteil, der Signaturschlüssel liegt bei Google - Nachteil, der
              Signaturschlüssel liegt bei Google..</span
            ></em
          ><span> </span><code>aab</code
          ><span>-Format ist zwingend seit 2021.</span>
          <strong><span>Grössenbeschränkung</span></strong
          ><span
            >: Google Play Store setzt zum Schutz der Infrastruktur ein Limit
            bei 100 MB für APK / 150MB für AAB.. Möglichkeiten daran vorbei sind
            APK Splitting (nach verschiedenen Kriterien wie CPU, Gerätetyp.. )
            oder APK Expansion Files für grosse Ressourcen wie Videos o.ä.
            Erlaubt max. 2x 2GB zusätzlich, als </span
          ><code>.oob</code
          ><span>
            Dateien oder &quot;Play Asset Delivery&quot; als Alternative.</span
          >
        </p>
        <p>
          <span>Inhalt eines APK Files (APK Analyzer in Android Studio):</span
          ><img
            src="res/android-apk-analyzed.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <p>
          <span
            >DEX Format: Optimierte Bytecode-Sprache für Mobile-CPUs. Inhalt </span
          ><code>classes.dex</code><span>:</span>
          <img
            src="res/android-apk-analyzed-code.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <h3 id="android-build-system"><span>Android Build System</span></h3>
        <p>
          <span
            >Java Virtual Machine wandelt Bytecode in Maschinencode um. Cold
            Code wird bei jeder Ausführung interpretiert, Hot Code wird vom
            JIT-Compiler vorkompiliert und steht direkt als Maschinencode zur
            Verfügung. Das </span
          ><strong><span>Android Asset Packaging Tool</span></strong
          ><span> erzeugt </span><code>R.java</code
          ><span> Klasse sowie alle möglichen Ressourcen.</span>
        </p>
        <p>
          <img
            src="res/android-buildprozess.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <p>
          <strong><span>DEX-Compiler</span></strong
          ><span
            >: DEX Code ist optimiert für die Ausführung auf Smartphones /
            mobile CPUs. Ausführung von DEX: früher ganz
            &quot;Java-Normal&quot;, via Android JVM (Name Dalvik).</span
          >
        </p>
        <p>
          <img src="res/android-build-v1.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <strong><span>Android Runtime ART 1.0</span></strong
          ><span
            >: Ab Android 5.0 wird das Interpretieren/Kompilieren während der
            Installation gemacht - Speicherplatz gegenüber Rechenzeit. Neues
            File-Format </span
          ><code>.oat</code
          ><span>
            (Ahead Of Time-Binaries). Grosser Nachteil: Umwandlung DEX auf AOT
            während Installation, nach Systemupdates von Android,
            &quot;Optimizing App 1/x&quot;-Screen.</span
          >
        </p>
        <p>
          <img src="res/android-build-v2.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <strong><span>ART 2.0:</span></strong
          ><span>
            Vom JIT-Compiler wird an Android OS gemeldet, welcher Code Hot-Code
            ist. Resultierendes AOT-Profile wird verwendet, um Umwandlung von
            DEX in AOT zu machen. Effizienz-steigerung geschieht also stetig,
            nach der App-Installation. AOT-Profile können schlussendlich via
            Google Play Store verteilt werden.</span
          >
        </p>
        <p>
          <img src="res/android-build-v3.png" referrerpolicy="no-referrer" />
        </p>
        <h1 id="android-jetpack"><span>Android Jetpack</span></h1>
        <p>
          <span
            >Erweitert die Android SDK, bietet verschiedene Komponenten der
            Bereiche </span
          ><strong><span>Architektur</span></strong
          ><span>, UI, Foundation, Behaviour. </span
          ><strong><span>Ziel</span></strong
          ><span
            >: Vereinfachen der Entwicklung von Android-Apps. Wird unabhängig
            von Android entwickelt </span
          ><em><span>(durch Google aber OpenSource)</span></em
          ><span
            >, hat auch eigene Versionierung. Verwendete Klassen müssen nur
            erben von Komponenten der AppCompat Jetpack-Library. </span
          ><code>AppCompatActivity</code><span> statt </span
          ><code>Activity</code><span>, </span><code>AppCompatButton</code
          ><span> statt </span><code>Button</code
          ><span
            >, etc etc. Hiess früher Android Support Libraries, Namespace ist </span
          ><code>androidx</code
          ><span
            >. Integration durch Android Studio automatisch in neuen
            Projekten.</span
          >
        </p>
        <p>
          <img
            src="res/android-jetpack-overview.png"
            referrerpolicy="no-referrer"
            alt="Jetpack Komponenten Stand 2018"
          />
        </p>
        <p>
          <strong><span>Components vs. Libraries</span></strong
          ><span> sind nicht immer Deckungsgleich. Beispiel Library </span
          ><code>androidx.lifecycle</code><span> enthält die Komponenten </span
          ><code>LiveData</code><span> und </span><code>ViewModel</code
          ><span>. </span><strong><span>Imports</span></strong
          ><span>
            müssen im Gradle File definiert werden.. In neuen Projekten
            standardmässig dabei. </span
          ><strong><span>Empfehlung:</span></strong
          ><span>
            Verwenden eher selektiv in Applikationen, bei neuen oder wichtigen
            Projekten mit Prototypen arbeiten.</span
          >
        </p>
        <h2 id="view-binding"><span>View Binding</span></h2>
        <p>
          <span
            >Ziel: Zugriff vom Controller (Activity) auf Elemente der View
            vereinfachen, ersetzt </span
          ><code>findViewById</code
          ><span>
            Methodenaufrufe. Bietet Typ- und Null-Sicherheit. Erzeugt
            Code-Klassen beim Build. Automatische Benennung: </span
          ><code>activity_main.xml</code><span> erzeugt </span
          ><code>ActivityMainBinding</code><span> Objekt.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="csharp"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="csharp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">android</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">buildFeatures</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">viewBinding</span> <span class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">// build.gradle</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 134px;"></div><div class="CodeMirror-gutters" style="display: none; height: 134px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MainActivity</span> <span class="cm-keyword">extends</span> <span class="cm-variable">AppCompatActivity</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">ActivityMainBinding</span> <span class="cm-variable">binding</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onCreate</span>(<span class="cm-variable">Bundle</span> <span class="cm-variable">savedInstanceState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">onCreate</span>(<span class="cm-variable">savedInstanceState</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">LayoutInflater</span> <span class="cm-variable">inflater</span> <span class="cm-operator">=</span> <span class="cm-variable">getLayoutInflater</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span> <span class="cm-operator">=</span> <span class="cm-variable">ActivityMainBinding</span>.<span class="cm-variable">inflate</span>(<span class="cm-variable">inflater</span>); <span class="cm-comment">// Objekt muss inflated werden</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">setContentView</span>(<span class="cm-variable">binding</span>.<span class="cm-variable">getRoot</span>());<span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">// Seiteninhalt via View Binding definieren</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span>.<span class="cm-variable">buttonHello</span>.<span class="cm-variable">setOnClickListener</span>(<span class="cm-variable">v</span> <span class="cm-operator">-&gt;</span> {}); <span class="cm-comment">// View Items zugreifen (CamelCase)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 287px;"></div><div class="CodeMirror-gutters" style="display: none; height: 287px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">LinearLayout</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_width</span>=<span class="cm-string">"match_parent"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-attribute">android:layout_height</span>=<span class="cm-string">"match_parent"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Button</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-attribute">android:id</span>=<span class="cm-string">"@+id/button_hello"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-attribute">android:text</span>=<span class="cm-string">"Hello World!"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">LinearLayout</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 182px;"></div><div class="CodeMirror-gutters" style="display: none; height: 182px;"></div></div></div></pre>
        <h2 id="data-binding"><span>Data Binding</span></h2>
        <p>
          <span
            >Ziel: Zugriff von der View auf Elemente im Code (meist Daten im
            ViewModel) vereinfachen. Variablen im XML generieren, die im Code
            via </span
          ><code>binding</code
          ><span>
            verknüpft werden können. Registriert das Layout als Observer der
            Daten (Achtung: Daten sind deshalb aber nicht zwingend
            Observable!)</span
          >
        </p>
        <p>
          <strong><span>Vorteile</span></strong
          ><span
            >: Ermöglicht direkte Kommunikation von View zum Model (ohne
            Controller). Weiter ermöglicht es eine MVVM Implementierung.
            ViewModel abstrahiert die Logik der View, um sie testbar zu machen.
            Schlankere Activities und Fragmente.</span
          >
        </p>
        <p>
          <strong><span>Nachteile</span></strong
          ><span
            >: Ohne MVVM wird Model mit Android-Details (ObservableField/Class)
            belastet. Zu viel Logik im Layout (Expression Language) kann nicht
            getestet werden. Erschwert Debugging bei Fehlern. Kompiliert
            langsamer. Gefahr von unsichtbaren Observern.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="csharp"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="csharp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">android</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">buildFeatures</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dataBinding</span> <span class="cm-atom">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-comment">// build.gradle</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 134px;"></div><div class="CodeMirror-gutters" style="display: none; height: 134px;"></div></div></div></pre>
        <p>
          <span>Im XML können Data Binding Expressions (</span
          ><code>@{user.name}</code
          ><span
            >) verwendet werden, um auf Eigenschaften der Variable zuzugreifen.
            Komplexere Optionen möglich mit verschiedenen Operatoren, auch
            Zuweisung von OnClickListeners.</span
          >
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MainActivity</span> <span class="cm-keyword">extends</span> <span class="cm-variable">AppCompatActivity</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable">ActivityMainBinding</span> <span class="cm-variable">binding</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onCreate</span>(<span class="cm-variable">Bundle</span> <span class="cm-variable">savedInstanceState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">onCreate</span>(<span class="cm-variable">savedInstanceState</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">LayoutInflater</span> <span class="cm-variable">inflater</span> <span class="cm-operator">=</span> <span class="cm-variable">getLayoutInflater</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span> <span class="cm-operator">=</span> <span class="cm-variable">ActivityMainBinding</span>.<span class="cm-variable">inflate</span>(<span class="cm-variable">inflater</span>); <span class="cm-comment">// Objekt muss inflated werden</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span> &nbsp; &nbsp;<span class="cm-variable">User</span> <span class="cm-variable">user</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">User</span>(<span class="cm-string">"Thomas"</span>, <span class="cm-string">"Kälin"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">SomeViewModel</span> <span class="cm-variable">vm</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">SomeViewModel</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span>.<span class="cm-variable">setUser</span>(<span class="cm-variable">user</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span>.<span class="cm-variable">setVm</span>(<span class="cm-variable">vm</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 339px;"></div><div class="CodeMirror-gutters" style="display: none; height: 339px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">data</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">variable</span> <span class="cm-attribute">name</span>=<span class="cm-string">"user"</span> <span class="cm-attribute">type</span>=<span class="cm-string">"path.package.my.User"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">variable</span> <span class="cm-attribute">name</span>=<span class="cm-string">"vm"</span> <span class="cm-attribute">type</span>=<span class="cm-string">"dev.kuendig.app.SomeViewModel"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">data</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">TextView</span> <span class="cm-attribute">android:text</span>=<span class="cm-string">"@{user.firstName}"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div><div class="CodeMirror-gutters" style="display: none; height: 157px;"></div></div></div></pre>
        <p>
          <span>Binding im Layout wird mittels einer </span
          ><strong><span>Expression Language</span></strong
          ><span>
            definiert, die einige Operationen anbietet (nicht erlaubt sind </span
          ><code>new, this, super</code><span>):</span>
          <em
            ><span>Mathematical: </span><code>+ - / * %</code
            ><span>, String Concatenation: </span><code>+</code
            ><span>, Logical: </span><code>&amp;&amp; ||</code
            ><span>, Binary: </span><code>&amp; | ^</code><span>, Unary: </span
            ><code>+ - ! ~</code><span>, Shift: </span
            ><code>&gt;&gt; &gt;&gt;&gt; &lt;&lt;</code
            ><span>, Comparison: </span><code>== &gt; &lt; &gt;= &lt;=</code
            ><span> (escape &lt; as </span><code>&amp;lt;</code
            ><span
              >), instanceof, Grouping with (), Literals: character string
              numeric </span
            ><code>null</code
            ><span>, Casts, Method Calls, Field Access, Array Operator </span
            ><code>[]</code><span>, Ternary Operator </span><code>?:</code></em
          >
        </p>
        <p>
          <span>Beispiele: </span
          ><code
            >android:text=&quot;@{String.valueof(index + 1)}&quot;
            android:visibility=&quot;@{age &gt; 13 ? View.GONE :
            View.VISIBLE}&quot;</code
          >
        </p>
        <p>
          <strong><span>Event Handling:</span></strong
          ><span> Attribut </span><code>onClick</code
          ><span> im XML erwartet eine fixe Methodensignatur (</span
          ><code>void doSomething(View view)</code><span>). Entweder eine </span
          ><em><span>Method Reference</span></em
          ><span> direkt auf passende Signatur, oder ein </span
          ><em><span>Listener Binding</span></em
          ><span> für komplexere Anwendungen.</span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="xml"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">data</span><span class="cm-tag cm-bracket">&gt;&lt;</span><span class="cm-tag">variable</span> <span class="cm-attribute">name</span>=<span class="cm-string">"handler"</span> <span class="cm-attribute">type</span>=<span class="cm-string">"(..).EventHandler"</span> <span class="cm-tag cm-bracket">/&gt;&lt;/</span><span class="cm-tag">data</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Button</span> <span class="cm-attribute">android:onClick</span>=<span class="cm-string">"@{handler::doSomething}"</span> <span class="cm-tag cm-bracket">/&gt;</span> <span class="cm-comment">&lt;!-- Method Reference --&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Button</span> <span class="cm-attribute">android:onClick</span>=<span class="cm-string">"@{v -&gt; handler.doSomething(v, '...')}"</span> <span class="cm-tag cm-bracket">/&gt;</span> <span class="cm-comment">&lt;!-- Listener Binding --&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 78px;"></div><div class="CodeMirror-gutters" style="display: none; height: 78px;"></div></div></div></pre>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">EventHandler</span> { </span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doSomething</span>(<span class="cm-variable">View</span> <span class="cm-variable">view</span>) { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doSomething</span>(<span class="cm-variable">View</span> <span class="cm-variable">view</span>, <span class="cm-variable-3">String</span> <span class="cm-variable">text</span>) { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 105px;"></div><div class="CodeMirror-gutters" style="display: none; height: 105px;"></div></div></div></pre>
        <p>
          <strong><span>Observierbarkeit:</span></strong
          ><span>
            Data Binding erstellt einen Observer, Implementierung von Observable
            auf der anderen Seite muss aber auch geschehen. Varianten:
            Observable Field für einzelne Werte, Observable Classes für ganze
            Klassen. </span
          ><em
            ><span
              >&quot;Normaler&quot; Java-Observer funktioniert nicht!</span
            ></em
          >
        </p>
        <p>
          <strong><span>Two Way Bindings</span></strong
          ><span>
            muss vom XML Attribut auf gegebenem Objekt unterstützt werden. mit </span
          ><code>@={user.age}</code><span>.</span>
        </p>
        <h2 id="mvvm"><span>MVVM</span></h2>
        <p>
          <strong><span>View:</span></strong
          ><span> grafische Oberfläche und Benutzereingaben. </span
          ><strong><span>ViewModel:</span></strong
          ><span>
            Logik des UI (Zustände von Buttons, Verifikation von Input),
            Vermittlung zwischen View und Model. </span
          ><strong><span>Model:</span></strong
          ><span> enthält Domänen- und Businesslogik. </span>
          <em><span>Activity</span></em
          ><span> generiert nur noch View und verknüpft ViewModel.</span>
          <strong><span>Vorteile:</span></strong
          ><span>
            ViewModel einfach testbar, View frei von Logik, Änderungen am Model
            haben keine direkten Auswirkungen auf die View.</span
          >
        </p>
        <p>
          <strong><span>Verschiedene Probleme</span></strong
          ><span>
            bestehen noch mit einer manuellen Implementation bezüglich
            Lifecycle. </span
          ><strong><span>(1)</span></strong
          ><span>
            Unsichtbare Observers: UI kann aktualisiert werden, obwohl die
            Applikation bzw. Activity nicht mehr im Vordergrund ist. </span
          ><strong><span>(2)</span></strong
          ><span>
            Andererseits können Komponenten wie Services Anfragen bzw. Callbacks
            an nicht mehr vorhandene Elemente schicken. (Stop auf Service, der
            nie gestartet wurde, Callback auf Activity, die nicht mehr lebt,
            Start eines Dienstes, der dann endlos weiterläuft.) </span
          ><strong><span>(3)</span></strong
          ><span>
            Bei Rotation des Geräts wird das ViewModel auch neu erzeugt, Daten
            gehen somit verloren.</span
          >
        </p>
        <p class="pagebreak">
          <img
            src="res/android-lifecycleproblem.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <p>
          <span
            >Ziel: Dienste wie z.B. Location soll selbständig auf
            Lifecycle-Events reagieren.</span
          >
        </p>
        <p>
          <span>Problem (3) wird mit der abstrakten Basisklasse </span
          ><code>ViewModel</code
          ><span>
            gelöst: Mehrfache Erzeugung vom ViewModel mit demselben
            Lifecycle-Objekt liefert immer dasselbe Objekt (Singleton) zurück.
            Knüpft ViewModels an die Lebenszeit der gesamten App. Erzeugung vom
            geschieht neu ViewModel via </span
          ><code>ViewModelProvider</code
          ><span> bzw. ViewModelFactory, falls Parameter nötig sind.</span>
        </p>
        <p>
          <strong><span>ViewModel und Fragments</span></strong
          ><span
            >: ViewModel pro Activity kann Kommunikation zwischen Fragments oder
            Fragment/Activity vereinfachen. Damit verliert das Fragment jedoch
            teilweise seine Unabhängigkeit.</span
          >
          <strong><span>Persistenz von UI-State</span></strong
          ><span>
            via ViewModel ist einfach und schnell (in-Memory), bei App-Abstürzen
            jedoch nicht gesichert.</span
          >
        </p>
        <h2 id="lifecycle-aware-components">
          <span>Lifecycle-Aware Components</span>
        </h2>
        <h3 id="interface-lifecycleobserver">
          <span>Interface LifecycleObserver</span>
        </h3>
        <p>
          <span
            >Löst Probleme (1) und (2) von oben. Setzen das Observer Pattern um,
            indem ein Objekt mit Lebenszyklus observiert wird. Klasse Lifecycle
            kapselt den Zustand des beobachteten Objekts. Event wird an alle
            registrierten Observer geschickt. Kennt Methode </span
          ><code>getLifecycle()</code
          ><span> zur Übergabe des eigenen Lifecycle an den Listener. </span
          ><strong
            ><span
              >Die Zustandslogik verschiebt sich vom Owner hin zum
              Observer.</span
            ></strong
          >
        </p>
        <p>
          <img src="res/android-lifecycle.png" referrerpolicy="no-referrer" />
        </p>
        <p>
          <span>Lifecycle hält intern den eigenen State als Enum (siehe </span
          ><code>getCurrentState</code
          ><span
            >) und kennt Events als Callback-Methoden. LifecycleObserver kann
            dann diese Callback-Methoden verwenden.
          </span>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@OnLifeCycleEvent</span>(<span class="cm-variable">ON_START</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">start</span>() { <span class="cm-comment">/* ... */</span> }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@OnLifeCycleEvent</span>(<span class="cm-variable">ON_STOP</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">stop</span>() { <span class="cm-comment">/* ... */</span> }</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 104px;"></div><div class="CodeMirror-gutters" style="display: none; height: 104px;"></div></div></div></pre>
        <h3 id="livedata"><span>LiveData</span></h3>
        <p>
          <span
            >Für Data Binding: ein Lifecycle-aware Observable. Also ein
            Datenobjekt, dass nur Updates liefert, wenn das zugrundeliegende
            Objekt selber aktiv ist. Alternative zu ObservableFields /
            ObservableClasses.</span
          >
          <span>im ViewModel </span
          ><code>new MutableLiveData&lt;string&gt;()</code
          ><span> - Room kann z.b. direkt LiveData zurückliefern.</span>
        </p>
        <p>
          <span>Registrierung auf dem Lifecycle-Owner ist nötig mit </span
          ><code>binding.setLifecycleOwner(this);</code>
        </p>
        <pre
          class="md-fences md-end-block ty-contain-cm modeLoaded"
          spellcheck="false"
          lang="java"
        ><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 11px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">MyActivity</span> <span class="cm-keyword">extends</span> <span class="cm-variable">AppCompatActivity</span> {</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span> <span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">onCreate</span> (<span class="cm-variable">Bundle</span> <span class="cm-variable">savedInstanceState</span>) {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">super</span>.<span class="cm-variable">onCreate</span>(<span class="cm-variable">savedInstanceState</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ViewModel</span> <span class="cm-variable">viewModel</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">ViewModel</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// vm.name.observe(this, name -&gt; { /* ... */}) wäre die Basis für Data Binding</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">binding</span>.<span class="cm-variable">setLifecycleOwner</span>(<span class="cm-keyword">this</span>); <span class="cm-comment">// Wie obere Zeile, für alle Objekte im ViewModel</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 208px;"></div><div class="CodeMirror-gutters" style="display: none; height: 208px;"></div></div></div></pre>
        <p>
          <span
            >Zyklus in dieser Grafik ist nicht problematisch, da LiveData die
            Activity nur als Interface LifecycleOwner kennt:</span
          >
        </p>
        <p>
          <img
            src="res/android-activity-livedata.png"
            referrerpolicy="no-referrer"
          />
        </p>
        <h3 id="standardarchitektur-für-android-apps">
          <span>Standardarchitektur für Android Apps</span>
        </h3>
        <p>
          <span
            >Repository-Pattern: Bietet ein &quot;Interface&quot;
            (Austauschbarkeit) für Persistenzmechanismen. Erlaubt internes
            Caching. Verbessert Testbarkeit vom ViewModel.</span
          >
        </p>
        <p>
          <img
            src="res/android-standardarchitektur.png"
            alt="Standardarchitektur"
            style="zoom: 33%"
          />
        </p>
      </div>
    </div>
  </body>
</html>
